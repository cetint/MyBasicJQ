<html>
	<head>
			<title>Example jQuery</title>
			
			<script src="jquery-1.7.2.js" type="text/javascript"></script>
			<script src="jquery.tmpl.js" type="text/javascript"></script>
			<script src="jquery.validate.js" type="text/javascript"></script>
			<link rel="stylesheet" type="text/css" href="main.css" />
			<style type="text/css">
			
			#errorSummary{border:medium solid red;  width:500px; align:center;}				
			</style>
			<script type="text/javascript">
			$(document).ready(function(){
			
			
			        var data =[{name:"Astor", product:"astor", stocklevel:10, price:2.99},
						{name:"Daffodil", product:"daffodil", stocklevel:12, price:1.99},
						{name:"Rose", product:"rose", stocklevel:2, price:4.99},
						{name:"Peony", product:"peony", stocklevel:0, price:1.50},
						{name:"Primula", product:"primula", stocklevel:1, price:3.12},
						{name:"Snowdrop", product:"snowdrop", stocklevel:15, price:0.99},
						];
						
					var plurals ={
					astor: "Astors",
					daffodil:"Daffodils",
					rose:"Roses",
					peony:"Peonies",
					primula:"Primulas",
					snowdrop:"Snowdrops",
					}
					
			
					var templResult = $('#flowerTmpl').tmpl(data);
					templResult.slice(0,3).appendTo("#row1");
					templResult.slice(3).appendTo("#row2");
					
					$('<div id=errorSummary>Please correct the following errors:</div>')
						.append('<ul id="errorList"></ul>').hide().insertAfter('h1');
					
				
						$('form').validate({
							highlight: function(element,errorClass){
								$(element).add($(element).parent()).addClass("invalidElem");
							},
							unhighlight: function(element,errorClass){
								$(element).add($(element).parent()).removeClass("invalidElem");
							},
							errorContainer: '#errorSummary',
							errorLabelContainer: '#errorList',
							wrapper: 'li',
							errorElement: "div"
							
						});
						
						$.validator.addMethod("stock", function(value,elem,args){
							return Number(value) <= Number(args.data.stocklevel);
						},function(args){
							return "You requested "+ $(args.element).val() + " "
								+plurals[args.data.product]+ " but we only have "
								+args.data.stocklevel + " in stock";
						});
						$('input').each(function(index,elem){
						$(elem).rules("add", {
							min:0,
							stock: {index: index,
							data: data[index],
							element:elem
							}
						})
						
						
						}).change(function(e){
							$('form').validate().element($(e.target));						
						});
						});
			
			
			2
			</script>
			
			<script id="flowerTmpl" type="text/x-jquery-tmpl">
				<div class="dcell">
				<img src="${product}.png"/>
				<label for="${product}">${name}:</label>
				<input name="${product}" value="0" class="required number" />
				</div>
			</script>
			
			
	</head>
<body>
<div style="width:700px;margin:0 auto">
			<h1>Tamer's Flower Shop</h1>
			<form method="post">
				<div id="oblock">
					<div class="dtable">
						<div id="row1" class="drow"></div>
						<div id="row2" class="drow"></div>
					</div>
				</div>
				<div id="buttonDiv"><button type="submit">Place order</button></div>
			</form>	
			</div>
</body>
</html>